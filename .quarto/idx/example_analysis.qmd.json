{"title":"Example Analysis","markdown":{"yaml":{"title":"Example Analysis","format":{"html":{"bibliography":"citation.bib","codetools":true}},"editor":{"render-on-save":true},"callout-appearance":"simple"},"headingText":"Introduction","containsRefs":false,"markdown":"\n\n\n<style>\n  .column-page-inset {\n    max-width: 50%; \n    margin-left: 185px;\n  }\n</style>\n\nI will perform a data analysis on this page using the Swiss dataset in R.\n\n:::{.column-page-inset}\n![A picture of the Swiss landscape [@reichmuth_2016_picture].](Switzerland.jpg)\n:::\n\n## Question\nWhat was the association between standardized socioeconomic indicators and fertility measures across various French-speaking provinces of Switzerland around 1888?\n\n## Intended Audience\nHistorian and lover of Swiss history.\n\n## Data\nThis dataset contains standardized socioeconomic indicators and fertility measures for 47 Swiss French-speaking provinces in about 1888 [@a2024_r]. It has a high research value, as Switzerland experienced a demographic transition in 1988, during which its fertility rates started declining from the levels typical of developing countries [@mosteller1977data].\n\n\n### Data Source\nIt is a built-in dataset in R, and its documentation manual is published by ETH Zurich [@a2024_r].\n\n::: {.callout-tip}\nFiles containing compiled socioeconomic data for Switzerland from the years 1887, 1888, 1910, and 1930 are available [here](https://oprdata.princeton.edu/archive/pefp/switz.aspx){.external target=\"_blank\"} for further reference.\n:::\n\n### Data dictionary\n```{r data_dictionary}\nsapply(swiss, class)\n```\n\n|Variable             |Class     |Description|\n|:--------------------|:---------|:-----------|\n|Fertility            |Numeric |Common standardized fertility measure (scaled in [0,100])|\n|Agriculture          |Numeric |Percentage of males employed in agriculture |\n|Examination          |Integer |Percentage of draftees achieving the highest score on the military exam |\n|Education            |Integer |Percentage of draftees with education beyond primary school |\n|Catholic             |Numeric |Percentage of Catholic |\n|Infant.Mortality     |Numeric |Percentage of live births surviving less than one year |\n\n::: {.callout-note}\n1. The variable descriptions are based on the R documentation manual published by ETH Zurich [@a2024_r].\n2. Figures of `Examination` and `Education` are averaged over the years 1887 to 1889 [@a2024_opr]. \n:::\n\n### Data Analysis\nWe firts look at the summary of data.\n```{r data_summary}\nsummary(swiss)\n```\n\nWe notice that variables `Agriculture` and `Catholic` had large discrepancies across provinces, while others exhibited less variation.\n\nWe then investigate the association between male agricultural employment levels and fertility.\n\n```{r agriculture_his}\nlibrary(ggplot2)\nsuppressPackageStartupMessages(library(dplyr))\nswiss %>% ggplot(aes(x=Agriculture)) +\n    geom_histogram(bins=15,fill='white',color='black')+\n    labs(x=\"Percentage of males in agriculture\",\n    y=\"Count\",\n    title = \"Histogram of the Percentage of Males Employed in Agriculture\",\n    subtitle = \"The percentage varies significantly across provinces \",\n    caption = \"Plotted by Shengyi Li\")+\n    theme_bw(base_family = \"Times\")+\n  theme(plot.title = element_text(size=15,hjust=0.5),\n  plot.subtitle = element_text(hjust=0.5,size=12.5),\n  axis.title.x = element_text(size=12),\n  axis.title.y = element_text(size=12))\n```\n\nDue to the wide range of `Agriculture` and similar frequencies across bins, we divided it into three categories—low, medium, and high—to examine its association with fertility.\n\n```{r agriculture_threecat}\ncategory_data <- swiss %>% \n  mutate(Agriculture_group = cut(Agriculture,\n                                  breaks = quantile(Agriculture, probs = c(0, 1/3, 2/3, 1)),\n                                  labels = c(\"Low\", \"Medium\",\"High\"), \n                                  include.lowest = TRUE))\n```\n\n```{r agriculture_fertility_boxplot}\ncategory_data %>% ggplot(aes(x=Agriculture_group,y=Fertility))+\n  geom_boxplot()+\n  labs(x = \"Groups by percentage of males in agriculture\", \n       y = \"Fertility measures\", \n       color = \"Agriculture_group\",\n       title = \"Boxplot of fertility measures by different agricultural employment levels\",\n       subtitle = \"Distributions of fertility measures among the three groups are similar\",\n    caption = \"Plotted by Shengyi Li\")+\n  theme_bw(base_family = \"Times\")+\n  theme(plot.title = element_text(size=15,hjust=0.5),\n  plot.subtitle = element_text(hjust=0.5,size=12.5),\n  axis.title.x = element_text(size=12),\n  axis.title.y = element_text(size=12))\n```\n\nAs the percentage of males employed in agriculture increases, the mean fertility measures remains relatively stable; however, both the first quartile (Q1) and third quartile (Q3) within each group show a gradual increase. And outliers are more evident in the group with a low percentage of males employed in agriculture.\n\nWe also examine how the percentage of males employed in agriculture affects the average infant mortality measures.\n\n```{r agriculture_mortality}\n#| column: margin\n\nknitr::kable(\ncategory_data %>% group_by(Agriculture_group) %>%\n  summarize(Mean_infant_mortality = round(mean(Infant.Mortality),2)) %>%\n  rename(Ag_group=Agriculture_group)%>%\n  arrange(desc(Mean_infant_mortality)))\n```\n\nWe notice that mean infant mortality was fairly similar between different agriculture groups (abbreviated as Ag_group in the table). It follows that the percentage of males in agriculture had few influences on infant mortality on average.\n\nWe then investigate the association between education levels and examination performance with fertility in different agriculture groups.\n\n```{r Edu_Fer}\ncategory_data %>% \n  ggplot(aes(x=Education,y=Fertility,color=Examination))+\n  geom_point(size=3)+\n  facet_wrap(vars(Agriculture_group))+\n  scale_color_gradient(low = \"lightblue\", high = \"darkblue\")+\n  labs(y=\"Fertility measure\",\n  title = 'Scatter plot of Fertility vs Education by agriculture groups,  \\n Colored by Examination performance',\n  subtitle=\"Fertility measure is negatively correlated with Educ. level and examination performance\",\n  caption = \"Plotted by Shengyi Li\")+\n  theme_bw(base_family = \"Times\")+\n  theme(plot.title = element_text(size=15,hjust=0.5),\n  plot.subtitle = element_text(hjust=0.5,size=12.5),\n  axis.title.x = element_text(size=12.5),\n  axis.title.y = element_text(size=12.5))\n```\n\nWe observe that, across all provinces, fertility measures were generally above 50, while education percentages were typically below 20, and the proportions of high exam scores were usually under 35. Additionally, provinces with lower education levels tended to perform worse on examinations and exhibited higher fertility measures. In groups with low percentages of males employed in agriculture, draftees were more likely to achieve the highest scores on the military exam.\n\n## Summary\n1. In 1988, the percentage of Swiss males employed in agriculture varied significantly across provinces, generally ranging between 20% and 70%.\n2. This percentage had minimal impact on the average infant mortality and fertility measures; however, the first and third quartiles of fertility measures showed a gradual increase as this percentage rose.\n3. Draftees from provinces with lower percentages of males in agriculture tended to perform better on the military exam.\n4. Educated male percentages were positively correlated with draftees' performance on the military exam, and these two are negatively correlated with fertility measures.\n\n## Function used\n`dplyr` package: `mutate()`, `group_by()`, `summarize()`, `arrange()`, `desc()`, and `rename()`\n\n`ggplot2` package: `ggplot()`, `geom_point()`, `geom_histogram()`, `geom_boxplot()`, and `facet_wrap()`","srcMarkdownNoYaml":"\n\n\n<style>\n  .column-page-inset {\n    max-width: 50%; \n    margin-left: 185px;\n  }\n</style>\n\n## Introduction \nI will perform a data analysis on this page using the Swiss dataset in R.\n\n:::{.column-page-inset}\n![A picture of the Swiss landscape [@reichmuth_2016_picture].](Switzerland.jpg)\n:::\n\n## Question\nWhat was the association between standardized socioeconomic indicators and fertility measures across various French-speaking provinces of Switzerland around 1888?\n\n## Intended Audience\nHistorian and lover of Swiss history.\n\n## Data\nThis dataset contains standardized socioeconomic indicators and fertility measures for 47 Swiss French-speaking provinces in about 1888 [@a2024_r]. It has a high research value, as Switzerland experienced a demographic transition in 1988, during which its fertility rates started declining from the levels typical of developing countries [@mosteller1977data].\n\n\n### Data Source\nIt is a built-in dataset in R, and its documentation manual is published by ETH Zurich [@a2024_r].\n\n::: {.callout-tip}\nFiles containing compiled socioeconomic data for Switzerland from the years 1887, 1888, 1910, and 1930 are available [here](https://oprdata.princeton.edu/archive/pefp/switz.aspx){.external target=\"_blank\"} for further reference.\n:::\n\n### Data dictionary\n```{r data_dictionary}\nsapply(swiss, class)\n```\n\n|Variable             |Class     |Description|\n|:--------------------|:---------|:-----------|\n|Fertility            |Numeric |Common standardized fertility measure (scaled in [0,100])|\n|Agriculture          |Numeric |Percentage of males employed in agriculture |\n|Examination          |Integer |Percentage of draftees achieving the highest score on the military exam |\n|Education            |Integer |Percentage of draftees with education beyond primary school |\n|Catholic             |Numeric |Percentage of Catholic |\n|Infant.Mortality     |Numeric |Percentage of live births surviving less than one year |\n\n::: {.callout-note}\n1. The variable descriptions are based on the R documentation manual published by ETH Zurich [@a2024_r].\n2. Figures of `Examination` and `Education` are averaged over the years 1887 to 1889 [@a2024_opr]. \n:::\n\n### Data Analysis\nWe firts look at the summary of data.\n```{r data_summary}\nsummary(swiss)\n```\n\nWe notice that variables `Agriculture` and `Catholic` had large discrepancies across provinces, while others exhibited less variation.\n\nWe then investigate the association between male agricultural employment levels and fertility.\n\n```{r agriculture_his}\nlibrary(ggplot2)\nsuppressPackageStartupMessages(library(dplyr))\nswiss %>% ggplot(aes(x=Agriculture)) +\n    geom_histogram(bins=15,fill='white',color='black')+\n    labs(x=\"Percentage of males in agriculture\",\n    y=\"Count\",\n    title = \"Histogram of the Percentage of Males Employed in Agriculture\",\n    subtitle = \"The percentage varies significantly across provinces \",\n    caption = \"Plotted by Shengyi Li\")+\n    theme_bw(base_family = \"Times\")+\n  theme(plot.title = element_text(size=15,hjust=0.5),\n  plot.subtitle = element_text(hjust=0.5,size=12.5),\n  axis.title.x = element_text(size=12),\n  axis.title.y = element_text(size=12))\n```\n\nDue to the wide range of `Agriculture` and similar frequencies across bins, we divided it into three categories—low, medium, and high—to examine its association with fertility.\n\n```{r agriculture_threecat}\ncategory_data <- swiss %>% \n  mutate(Agriculture_group = cut(Agriculture,\n                                  breaks = quantile(Agriculture, probs = c(0, 1/3, 2/3, 1)),\n                                  labels = c(\"Low\", \"Medium\",\"High\"), \n                                  include.lowest = TRUE))\n```\n\n```{r agriculture_fertility_boxplot}\ncategory_data %>% ggplot(aes(x=Agriculture_group,y=Fertility))+\n  geom_boxplot()+\n  labs(x = \"Groups by percentage of males in agriculture\", \n       y = \"Fertility measures\", \n       color = \"Agriculture_group\",\n       title = \"Boxplot of fertility measures by different agricultural employment levels\",\n       subtitle = \"Distributions of fertility measures among the three groups are similar\",\n    caption = \"Plotted by Shengyi Li\")+\n  theme_bw(base_family = \"Times\")+\n  theme(plot.title = element_text(size=15,hjust=0.5),\n  plot.subtitle = element_text(hjust=0.5,size=12.5),\n  axis.title.x = element_text(size=12),\n  axis.title.y = element_text(size=12))\n```\n\nAs the percentage of males employed in agriculture increases, the mean fertility measures remains relatively stable; however, both the first quartile (Q1) and third quartile (Q3) within each group show a gradual increase. And outliers are more evident in the group with a low percentage of males employed in agriculture.\n\nWe also examine how the percentage of males employed in agriculture affects the average infant mortality measures.\n\n```{r agriculture_mortality}\n#| column: margin\n\nknitr::kable(\ncategory_data %>% group_by(Agriculture_group) %>%\n  summarize(Mean_infant_mortality = round(mean(Infant.Mortality),2)) %>%\n  rename(Ag_group=Agriculture_group)%>%\n  arrange(desc(Mean_infant_mortality)))\n```\n\nWe notice that mean infant mortality was fairly similar between different agriculture groups (abbreviated as Ag_group in the table). It follows that the percentage of males in agriculture had few influences on infant mortality on average.\n\nWe then investigate the association between education levels and examination performance with fertility in different agriculture groups.\n\n```{r Edu_Fer}\ncategory_data %>% \n  ggplot(aes(x=Education,y=Fertility,color=Examination))+\n  geom_point(size=3)+\n  facet_wrap(vars(Agriculture_group))+\n  scale_color_gradient(low = \"lightblue\", high = \"darkblue\")+\n  labs(y=\"Fertility measure\",\n  title = 'Scatter plot of Fertility vs Education by agriculture groups,  \\n Colored by Examination performance',\n  subtitle=\"Fertility measure is negatively correlated with Educ. level and examination performance\",\n  caption = \"Plotted by Shengyi Li\")+\n  theme_bw(base_family = \"Times\")+\n  theme(plot.title = element_text(size=15,hjust=0.5),\n  plot.subtitle = element_text(hjust=0.5,size=12.5),\n  axis.title.x = element_text(size=12.5),\n  axis.title.y = element_text(size=12.5))\n```\n\nWe observe that, across all provinces, fertility measures were generally above 50, while education percentages were typically below 20, and the proportions of high exam scores were usually under 35. Additionally, provinces with lower education levels tended to perform worse on examinations and exhibited higher fertility measures. In groups with low percentages of males employed in agriculture, draftees were more likely to achieve the highest scores on the military exam.\n\n## Summary\n1. In 1988, the percentage of Swiss males employed in agriculture varied significantly across provinces, generally ranging between 20% and 70%.\n2. This percentage had minimal impact on the average infant mortality and fertility measures; however, the first and third quartiles of fertility measures showed a gradual increase as this percentage rose.\n3. Draftees from provinces with lower percentages of males in agriculture tended to perform better on the military exam.\n4. Educated male percentages were positively correlated with draftees' performance on the military exam, and these two are negatively correlated with fertility measures.\n\n## Function used\n`dplyr` package: `mutate()`, `group_by()`, `summarize()`, `arrange()`, `desc()`, and `rename()`\n\n`ggplot2` package: `ggplot()`, `geom_point()`, `geom_histogram()`, `geom_boxplot()`, and `facet_wrap()`"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"example_analysis.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.5.57","theme":"bootstrap","title":"Example Analysis","editor":{"render-on-save":true},"callout-appearance":"simple","bibliography":["citation.bib"],"codetools":true},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}